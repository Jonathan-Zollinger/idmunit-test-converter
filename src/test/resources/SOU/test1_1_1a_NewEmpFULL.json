{
  "id" : "test1_1_1a_NewEmpFULL",
  "title" : "1.1.1a New Employee Hire (With generated email plus building/division assignemnts plus manager).",
  "description" : "",
  "operations" : [ {
    "comment" : "Clean up",
    "operation" : "comment",
    "data" : { }
  }, {
    "comment" : "Clean up the employee table.",
    "operation" : "execSQL",
    "target" : "HRIS",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "sql" : [ "DELETE FROM umd_empl_master WHERE employee_id = '111HRA'" ]
    }
  }, {
    "comment" : "Clean up the event log",
    "operation" : "execSQL",
    "target" : "HRIS",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "sql" : [ "DELETE FROM eventlog WHERE table_key = 'employee_id=111HRA'" ]
    }
  }, {
    "comment" : "Cleanup",
    "operation" : "DeleteObject",
    "target" : "UMD",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "dn" : [ "(workforceID=111HRA),base=ou=Emp,ou=Gov,o=UT" ]
    }
  }, {
    "comment" : "Cleanup",
    "operation" : "DeleteObject",
    "target" : "UMD",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "dn" : [ "(UTIW-Alias=new_user_000111hra),base=ou=Emp,ou=Gov,o=UT" ]
    }
  }, {
    "comment" : "Cleanup",
    "operation" : "DeleteObject",
    "target" : "UMD",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "dn" : [ "(UTIW-Alias=new_user_000111hra),base=ou=Protect,ou=Gov,o=UT" ]
    }
  }, {
    "comment" : "Clear UMD-Admin Email info rows:",
    "operation" : "RemoveAttr",
    "target" : "UMD",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "dn" : [ "cn=UMD-Admin,ou=Trees,o=IS" ],
      "objectClass" : [ " " ],
      "UTIW-EmailInfo" : [ "HR:H:81:dn=\\\\TRIVIRSOU\\\\UT\\\\Gov\\\\Emp\\\\000111HRA:eventdelete" ]
    }
  }, {
    "comment" : "Clear UMD-Admin Email info rows:",
    "operation" : "RemoveAttr",
    "target" : "UMD",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "dn" : [ "cn=UMD-Admin,ou=Trees,o=IS" ],
      "UTIW-EmailInfo" : [ "HR:H:81:dn=\\\\TRIVIRSOU\\\\UT\\\\Gov\\\\Emp\\\\IdMUnitUserAddHire:eventdelete" ]
    }
  }, {
    "comment" : "Clean up the user.",
    "operation" : "Delete",
    "target" : "OIDM",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "queryFilter" : [ "/workforceID+eq+\"111HRA\"" ],
      "resourceType" : [ "/managed/user/" ]
    }
  }, {
    "comment" : "Clean up the user.",
    "operation" : "Delete",
    "target" : "OIDM",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "queryFilter" : [ "/workforceID+eq+\"111HRA\"" ],
      "resourceType" : [ "/managed/user/" ]
    }
  }, {
    "comment" : "PRETEST",
    "operation" : "comment",
    "data" : { }
  }, {
    "comment" : "Validate the user is not in HRIS.",
    "operation" : "Validate",
    "target" : "HRIS",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : true,
    "data" : {
      "sql" : [ "SELECT * FROM umd_empl_master WHERE employee_id='111HRA';" ]
    }
  }, {
    "comment" : "Validate the user is not in the Repo.",
    "operation" : "ValidateObject",
    "target" : "OIDM",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : true,
    "data" : {
      "queryFilter" : [ "/workforceID+eq+\"111HRA\"" ],
      "resourceType" : [ "/managed/user/" ],
      "userName" : [ "user_.*" ]
    }
  }, {
    "comment" : "Validate the user is not in eDir.",
    "operation" : "ValidateObject",
    "target" : "UMD",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : true,
    "data" : {
      "dn" : [ "(workforceID=111HRA),base=ou=Emp,ou=Gov,o=UT" ]
    }
  }, {
    "comment" : "Validate the manager exists.",
    "operation" : "Validate",
    "target" : "HRIS",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "sql" : [ "SELECT * FROM umd_empl_master WHERE employee_id='MANAGR';" ]
    }
  }, {
    "comment" : "Validate the manager exists.",
    "operation" : "ValidateObject",
    "target" : "OIDM",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "queryFilter" : [ "/workforceID+eq+\"MANAGR\"" ],
      "resourceType" : [ "/managed/user/" ]
    }
  }, {
    "comment" : "Validate the manager exists.",
    "operation" : "ValidateObject",
    "target" : "UMD",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "dn" : [ "(workforceID=MANAGR),base=ou=Emp,ou=Gov,o=UT" ],
      "objectClass" : [ "inetOrgPerson" ],
      "UTIW-alias" : [ "user_.*" ]
    }
  }, {
    "comment" : "TEST",
    "operation" : "comment",
    "data" : { }
  }, {
    "comment" : "TEST",
    "operation" : "comment",
    "data" : { }
  }, {
    "comment" : "TEST",
    "operation" : "comment",
    "data" : { }
  }, {
    "comment" : "TEST - HRIS",
    "operation" : "comment",
    "data" : { }
  }, {
    "comment" : "EmployHire..",
    "operation" : "execSQL",
    "target" : "HRIS",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "sql" : [ "INSERT INTO umd_empl_master \n(\npref_first_name,\nempl_last_name, \nemployee_id, \nempl_agy, \nempl_org, \nempl_status, \nwork_building_id, \nempl_email, \npassword, \nempl_second_name, \nagy_desc, \nwork_addr_city, \nwork_addr_zip, \nwork_addr_line2, \nwork_addr_state, \nwork_addr_line1, \nempl_work_phone, \njobb_title, \nempl_public_email, \nmanager_ein, \nempl_name_suffix, \ninsurance_eligible, \nprotected_record_flag, \nempl_nw_access, \nperf_plan_flag, \nempl_schedule_cd, \nstart_date, \numd_disable_employee, \numd_termination_dt,\nleave_eligible\n)\nVALUES \n(\n'mygivenf',\n'IdMUnitUser',\n'111HRA',\n'110',\n'2906',\n'P',\n'IdMUnit8.1',\nNULL,\n'PassNotUsed#123',\n'InitMiddle',\n'SampleDeptName',\n'Salt Lake',\n'84051',\n'poboxaddrln2',\n'UT',\n'123 Street Address',\n'801-999-8888',\n'Firefighter',\n'recovery@example.com',\n'MANAGR',\n'III',\n'N',\n'N',\n'TRUE' ,\n'Y' ,\n'TL',\n'2019-08-01 12:59:00',\n'N',\n'2119-08-01 12:59:00',\n'Y'\n)" ]
    }
  }, {
    "comment" : "Validate the user in the HRIS database.",
    "operation" : "Validate",
    "target" : "HRIS",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "sql" : [ "SELECT * FROM umd_empl_master WHERE employee_id='111HRA';" ],
      "pref_first_name" : [ "mygivenf" ],
      "empl_second_name" : [ "InitMiddle" ],
      "empl_last_name" : [ "IdMUnitUser" ],
      "password" : [ "PassNotUsed#123" ],
      "employee_id" : [ "111HRA" ],
      "empl_agy" : [ "110" ],
      "empl_org" : [ "2906" ],
      "empl_status" : [ "P" ],
      "empl_work_phone" : [ "801-999-8888" ],
      "work_addr_line1" : [ "123 Street Address" ],
      "work_addr_line2" : [ "poboxaddrln2" ],
      "work_addr_city" : [ "Salt Lake" ],
      "work_addr_state" : [ "UT" ],
      "work_addr_zip" : [ "84051" ],
      "work_building_id" : [ "IdMUnit8.1" ],
      "jobb_title" : [ "Firefighter" ],
      "empl_public_email" : [ "recovery@example.com" ],
      "empl_name_suffix" : [ "III" ],
      "manager_ein" : [ "MANAGR" ],
      "agy_desc" : [ "SampleDeptName" ],
      "insurance_eligible" : [ "N" ],
      "protected_record_flag" : [ "N" ],
      "leave_eligible" : [ "Y" ],
      "empl_nw_access" : [ "(?i)TRUE" ],
      "perf_plan_flag" : [ "Y" ],
      "empl_schedule_cd" : [ "TL" ],
      "start_date" : [ "2019-08-01 12:59:00.0" ],
      "umd_disable_employee" : [ "N" ],
      "umd_termination_dt" : [ "2119-08-01 12:59:00.0" ]
    }
  }, {
    "comment" : "Validate there is no email from HRIS.",
    "operation" : "Validate",
    "target" : "HRIS",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : true,
    "data" : {
      "sql" : [ "SELECT * FROM umd_empl_master WHERE employee_id='111HRA';" ],
      "empl_email" : [ ".*" ]
    }
  }, {
    "comment" : "Reconcile – trigger the HRIS connector",
    "operation" : "Reconcile",
    "target" : "OIDM-SD",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "mapping" : [ "systemHRISUser__ACCOUNT___managedUser" ],
      "__NAME__" : [ "111HRA" ]
    }
  }, {
    "comment" : "Wait for recon to complete.",
    "operation" : "Wait",
    "target" : "OIDM",
    "waitInterval" : 3000,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "queryFilter" : [ "/workforceID+eq+\"111HRA\"" ]
    }
  }, {
    "comment" : "TEST - OIDM",
    "operation" : "comment",
    "data" : { }
  }, {
    "comment" : "Validate the user is created in OpenIDM (Minimal validate that the user exists).",
    "operation" : "ValidateObject",
    "target" : "OIDM",
    "waitInterval" : 3000,
    "retryCount" : 10,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "queryFilter" : [ "/workforceID+eq+\"111HRA\"" ],
      "resourceType" : [ "/managed/user/" ],
      "userName" : [ "user_.*" ]
    }
  }, {
    "comment" : "Validate the attrs that are syncing from HR into the Repo. - No Wait",
    "operation" : "ValidateObject",
    "target" : "OIDM",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "queryFilter" : [ "/workforceID+eq+\"111HRA\"" ],
      "resourceType" : [ "/managed/user/" ],
      "userName" : [ "user_.*" ],
      "userType" : [ "employee" ],
      "givenName" : [ "Mygivenf" ],
      "initials" : [ "InitMidd" ],
      "sn" : [ "IdMUnitUser" ],
      "mail" : [ ".*@noemail.utah.gov" ],
      "workforceID" : [ "111HRA" ],
      "financeUID" : [ "000111HRA" ],
      "employeeStatus" : [ "P" ],
      "company::string" : [ "State of Utah" ],
      "fullName::string" : [ "Mygivenf IdMUnitUser" ],
      "preferredName" : [ "IdMUnitUser" ],
      "telephoneNumber::string" : [ "801-999-8888" ],
      "accountStatus" : [ "active" ],
      "postalAddress" : [ "123 Street Address" ],
      "address2" : [ "poboxaddrln2" ],
      "city" : [ "Salt Lake" ],
      "stateProvince" : [ "UT" ],
      "postalCode::string" : [ "84051" ],
      "bldgID::string" : [ "IdMUnit8.1" ],
      "title" : [ "Firefighter" ],
      "recoveryEmail" : [ "recovery@example.com" ],
      "generationQualifier" : [ "III" ],
      "managerWorkforceID" : [ "MANAGR" ],
      "department::string" : [ "SampleDeptName \\(DEQ\\)" ],
      "insuranceEligible" : [ "(?i)FALSE" ],
      "invisible::boolean" : [ "(?i)FALSE" ],
      "leaveEligible" : [ "(?i)TRUE" ],
      "perfPlanFlag::string" : [ "(?i)TRUE" ],
      "emplScheduleCD" : [ "TL" ],
      "startDate" : [ "2019-08-01 12:59:00.0" ],
      "disableEmployee" : [ "(?i)False" ],
      "terminationDate" : [ "2119-08-01 12:59:00.0" ]
    }
  }, {
    "comment" : "Validate the attrs that are syncing from the CSV. - No Wait",
    "operation" : "ValidateObject",
    "target" : "OIDM",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "queryFilter" : [ "/workforceID+eq+\"111HRA\"" ],
      "resourceType" : [ "/managed/user/" ],
      "distList" : [ "UMD-EQ@UTAH.GOV;UMD-HR-DTS@utah.gov" ],
      "assignedAgency" : [ "480" ],
      "department::string" : [ "SampleDeptName \\(DEQ\\)" ]
    }
  }, {
    "comment" : "Validate the attrs from reference objects - No Wait",
    "operation" : "ValidateObject",
    "target" : "OIDM",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "queryFilter" : [ "/workforceID+eq+\"111HRA\"" ],
      "resourceType" : [ "/managed/user/" ],
      "building::string" : [ ".*Building.*" ],
      "manager" : [ ".*user_000managr.*" ],
      "division::string" : [ ".*Division.*" ]
    }
  }, {
    "comment" : "Pending Question From Kyle: Validate reference objects - OIDM - No Wait",
    "operation" : "ValidateObject",
    "target" : "OIDM",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : true,
    "expectFailure" : false,
    "data" : {
      "queryFilter" : [ "/workforceID+eq+\"111HRA\"" ],
      "resourceType" : [ "/managed/user/" ],
      "divisionNumber" : [ "DivisionNumberVal - Asked Kyle where to get this value on 8/26/2020" ]
    }
  }, {
    "comment" : "Set the attrs that are not sourced from HR.",
    "operation" : "AddAttribute",
    "target" : "OIDM",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "queryFilter" : [ "/workforceID+eq+\"111HRA\"" ],
      "resourceType" : [ "/managed/user/" ],
      "description[]" : [ "IdMUnit Test User" ],
      "facsimileTelephoneNumber::string" : [ "111-222-3333" ],
      "homeTelephoneNumber" : [ "444-444-4445" ],
      "location" : [ "testLocVal" ],
      "homeCity" : [ "homeCity" ],
      "homePostalAddress" : [ "homePostalAddress" ],
      "homeState" : [ "Utah" ],
      "homeZipCode::string" : [ "84043" ],
      "bldgName" : [ "UTIW-BuildingNameVal" ],
      "mfaSendCodeEnabled::boolean" : [ "true" ],
      "publishedTelephoneNumber" : [ "111-333-5555" ],
      "assignedRSATokenSerial[]" : [ "12341234" ],
      "mobile" : [ "555-555-6668" ],
      "personalMobile" : [ "666-666-7777" ],
      "accountLocation[]" : [ "AcctLocVal1!!AcctLocVal2" ]
    }
  }, {
    "comment" : "Validate the attrs that are manually set in the Repo to test they get to UMD later.",
    "operation" : "ValidateObject",
    "target" : "OIDM",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "queryFilter" : [ "/workforceID+eq+\"111HRA\"" ],
      "resourceType" : [ "/managed/user/" ],
      "userName" : [ "user_.*" ],
      "description[]" : [ "IdMUnit Test User" ],
      "facsimileTelephoneNumber::string" : [ "111-222-3333" ],
      "homeTelephoneNumber" : [ "444-444-4445" ],
      "location" : [ "testLocVal" ],
      "homeCity" : [ "homeCity" ],
      "homePostalAddress" : [ "homePostalAddress" ],
      "homeState" : [ "Utah" ],
      "homeZipCode::string" : [ "84043" ],
      "mfaSendCodeEnabled::boolean" : [ "(?i)TRUE" ],
      "publishedTelephoneNumber" : [ "111-333-5555" ],
      "assignedRSATokenSerial[]" : [ "12341234" ],
      "mobile" : [ "555-555-6668" ],
      "personalMobile" : [ "666-666-7777" ],
      "accountLocation[]" : [ "AcctLocVal1!!AcctLocVal2" ]
    }
  }, {
    "comment" : "Not required since implicit sync is on. \nReconcile - trigger the eDir connector.",
    "operation" : "Reconcile",
    "target" : "OIDM",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : true,
    "expectFailure" : false,
    "data" : {
      "queryFilter" : [ "/workforceID+eq+\"111HRA\"" ],
      "mapping" : [ "managedUser_systemEdirectoryStateUser" ],
      "userName" : [ "user_.*" ]
    }
  }, {
    "comment" : "TEST - UMD",
    "operation" : "comment",
    "data" : { }
  }, {
    "comment" : "Validate the user in UMD exists. - With Wait",
    "operation" : "ValidateObject",
    "target" : "UMD",
    "waitInterval" : 4000,
    "retryCount" : 6,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "dn" : [ "(workforceID=111HRA),base=ou=Emp,ou=Gov,o=UT" ],
      "UTIW-Action" : [ "HR-HIRE|Google-Hire|HR-Processed|HIRE|Google-Offer|HIRE|Google-Offer" ]
    }
  }, {
    "comment" : "Validate the attributes on the user in UDM - No Wait",
    "operation" : "ValidateObject",
    "target" : "UMD",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "dn" : [ "(workforceID=111HRA),base=ou=Emp,ou=Gov,o=UT" ],
      "objectClass" : [ "inetOrgPerson" ],
      "UTIW-alias" : [ "user_.*" ],
      "CN" : [ "000111HRA" ],
      "givenName" : [ "Mygivenf" ],
      "initials" : [ "InitMidd" ],
      "sn" : [ "IdMUnitUser" ],
      "mail" : [ ".*@noemail.utah.gov" ],
      "workforceID" : [ "111HRA" ],
      "UTIW-UID" : [ "^\\d{9}$" ],
      "uid" : [ "000111HRA" ],
      "UTIW-AgencyNumber" : [ "110" ],
      "UTIW-LowOrg" : [ "2906" ],
      "company" : [ "State of Utah" ],
      "fullName" : [ "Mygivenf IdMUnitUser" ],
      "preferredName" : [ "IdMUnitUser" ],
      "UTIW-CreationTime" : [ "20.*" ],
      "description" : [ "IdMUnit Test User" ],
      "facsimileTelephoneNumber" : [ "111-222-3333" ],
      "homePhone" : [ "444-444-4445" ],
      "telephoneNumber" : [ "801-999-8888" ],
      "l" : [ "testLocVal" ],
      "loginDisabled" : [ "FALSE" ],
      "homeCity" : [ "homeCity" ],
      "homePostalAddress" : [ "homePostalAddress" ],
      "homeState" : [ "Utah" ],
      "homeZipCode" : [ "84043" ],
      "street" : [ "123 Street Address" ],
      "postOfficeBox" : [ "poboxaddrln2" ],
      "physicalDeliveryOfficeName" : [ "Salt Lake" ],
      "st" : [ "UT" ],
      "UTIW-BldgID" : [ "IdMUnit8.1" ],
      "UTIW-PublicEmail" : [ "recovery@example.com" ],
      "UTIW-PublicPhoneNumber" : [ "111-333-5555" ],
      "UTIW-RSA-DeviceSerialNumber-Value" : [ "12341234" ],
      "generationQualifier" : [ "III" ],
      "managerWorkforceID" : [ "MANAGR" ],
      "mobile" : [ "555-555-6668" ],
      "personalMobile" : [ "666-666-7777" ]
    }
  }, {
    "comment" : "Validate the attributes on the user from the CSV in UDM - No Wait",
    "operation" : "ValidateObject",
    "target" : "UMD",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "dn" : [ "(workforceID=111HRA),base=ou=Emp,ou=Gov,o=UT" ],
      "UTIW-DistList" : [ "UMD-EQ@UTAH.GOV;UMD-HR-DTS@utah.gov" ],
      "UTIW-AssignedAgency" : [ "480" ],
      "ou" : [ "SampleDeptName \\(DEQ\\)" ]
    }
  }, {
    "comment" : "Validate reference objects - UMD - No Wait",
    "operation" : "ValidateObject",
    "target" : "UMD",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "dn" : [ "(workforceID=111HRA),base=ou=Emp,ou=Gov,o=UT" ],
      "manager" : [ "(?i)cn=.*" ]
    }
  }, {
    "comment" : "Pending Question From Kyle: Validate reference objects - UMD - No Wait",
    "operation" : "ValidateObject",
    "target" : "UMD",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : true,
    "expectFailure" : false,
    "data" : {
      "dn" : [ "(workforceID=111HRA),base=ou=Emp,ou=Gov,o=UT" ],
      "UTIW-DivisionNumber" : [ "DivisionNumberVal - Asked Kyle where to get this value on 8/26/2020" ]
    }
  }, {
    "comment" : "Check object classes",
    "operation" : "ValidateObject",
    "target" : "UMD",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "dn" : [ "(workforceID=111HRA),base=ou=Emp,ou=Gov,o=UT" ],
      "objectClass" : [ "UTIW-Public" ]
    }
  }, {
    "comment" : "Check object classes",
    "operation" : "ValidateObject",
    "target" : "UMD",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "dn" : [ "(workforceID=111HRA),base=ou=Emp,ou=Gov,o=UT" ],
      "objectClass" : [ "UTIW-AP-Move" ]
    }
  }, {
    "comment" : "Check object classes",
    "operation" : "ValidateObject",
    "target" : "UMD",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "dn" : [ "(workforceID=111HRA),base=ou=Emp,ou=Gov,o=UT" ],
      "objectClass" : [ "homeInfo" ]
    }
  }, {
    "comment" : "kbaInfoContainer removed from the solution.",
    "operation" : "ValidateObject",
    "target" : "UMD",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : true,
    "data" : {
      "dn" : [ "(workforceID=111HRA),base=ou=Emp,ou=Gov,o=UT" ],
      "objectClass" : [ "kbaInfoContainer" ]
    }
  }, {
    "comment" : "Check object classes",
    "operation" : "ValidateObject",
    "target" : "UMD",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "dn" : [ "(workforceID=111HRA),base=ou=Emp,ou=Gov,o=UT" ],
      "objectClass" : [ "UTIW-AP-Public" ]
    }
  }, {
    "comment" : "Check object classes",
    "operation" : "ValidateObject",
    "target" : "UMD",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "dn" : [ "(workforceID=111HRA),base=ou=Emp,ou=Gov,o=UT" ],
      "objectClass" : [ "UTIW-Status" ]
    }
  }, {
    "comment" : "Check object classes",
    "operation" : "ValidateObject",
    "target" : "UMD",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "dn" : [ "(workforceID=111HRA),base=ou=Emp,ou=Gov,o=UT" ],
      "objectClass" : [ "pushDeviceProfilesContainer" ]
    }
  }, {
    "comment" : "Check object classes",
    "operation" : "ValidateObject",
    "target" : "UMD",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "dn" : [ "(workforceID=111HRA),base=ou=Emp,ou=Gov,o=UT" ],
      "objectClass" : [ "webauthnDeviceProfilesContainer" ]
    }
  }, {
    "comment" : "Check object classes",
    "operation" : "ValidateObject",
    "target" : "UMD",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "dn" : [ "(workforceID=111HRA),base=ou=Emp,ou=Gov,o=UT" ],
      "objectClass" : [ "verifycodeRequirementContainer" ]
    }
  }, {
    "comment" : "Check object classes",
    "operation" : "ValidateObject",
    "target" : "UMD",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "dn" : [ "(workforceID=111HRA),base=ou=Emp,ou=Gov,o=UT" ],
      "objectClass" : [ "UTIW-Employee" ]
    }
  }, {
    "comment" : "BUGFIX: wait for a few seconds, and verify again: fax gets removed if HR bugfix doesn’t properly see fax on a modify",
    "operation" : "Wait",
    "target" : "UMD",
    "waitInterval" : 3000,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : { }
  }, {
    "comment" : "Wait part 2",
    "operation" : "Wait",
    "target" : "UMD",
    "waitInterval" : 2000,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : { }
  }, {
    "comment" : "BUGFIX: wait for a few seconds, and verify again: fax gets removed if HR bugfix doesn’t properly see fax on a modify",
    "operation" : "ValidateObject",
    "target" : "UMD",
    "waitInterval" : 4000,
    "retryCount" : 6,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "dn" : [ "(workforceID=111HRA),base=ou=Emp,ou=Gov,o=UT" ],
      "objectClass" : [ "inetOrgPerson" ],
      "UTIW-alias" : [ "user_.*" ],
      "givenName" : [ "Mygivenf" ],
      "initials" : [ "InitMidd" ],
      "sn" : [ "IdMUnitUser" ],
      "mail" : [ ".*@noemail.utah.gov" ],
      "workforceID" : [ "111HRA" ],
      "UTIW-UID" : [ "^\\d{9}$" ],
      "uid" : [ "000111HRA" ],
      "company" : [ "State of Utah" ],
      "fullName" : [ "Mygivenf IdMUnitUser" ],
      "preferredName" : [ "IdMUnitUser" ],
      "UTIW-CreationTime" : [ "20.*" ],
      "description" : [ "IdMUnit Test User" ],
      "facsimileTelephoneNumber" : [ "111-222-3333" ],
      "homePhone" : [ "444-444-4445" ],
      "telephoneNumber" : [ "801-999-8888" ],
      "l" : [ "testLocVal" ],
      "loginDisabled" : [ "FALSE" ],
      "homeCity" : [ "homeCity" ],
      "homePostalAddress" : [ "homePostalAddress" ],
      "homeState" : [ "Utah" ],
      "homeZipCode" : [ "84043" ],
      "street" : [ "123 Street Address" ],
      "postOfficeBox" : [ "poboxaddrln2" ],
      "physicalDeliveryOfficeName" : [ "Salt Lake" ],
      "st" : [ "UT" ],
      "postalCode" : [ "84051" ],
      "title" : [ "Firefighter" ],
      "UTIW-PublicEmail" : [ "recovery@example.com" ],
      "UTIW-PublicPhoneNumber" : [ "111-333-5555" ],
      "generationQualifier" : [ "III" ],
      "managerWorkforceID" : [ "MANAGR" ],
      "ou" : [ "SampleDeptName \\(DEQ\\)" ],
      "mobile" : [ "555-555-6668" ],
      "personalMobile" : [ "666-666-7777" ]
    }
  }, {
    "comment" : "Validate the user state.",
    "operation" : "ValidateObject",
    "target" : "UMD",
    "waitInterval" : 4000,
    "retryCount" : 6,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "dn" : [ "(workforceID=111HRA),base=ou=Emp,ou=Gov,o=UT" ],
      "UTIW-Action" : [ "HR-HIRE|Google-Hire|HR-Processed|HIRE|Google-Offer|HIRE|Google-Offer" ]
    }
  }, {
    "comment" : "TEST - Passwords",
    "operation" : "comment",
    "data" : { }
  }, {
    "comment" : "Validate the password in OpenIDM",
    "operation" : "ValidatePassword",
    "target" : "OIDM",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "queryFilter" : [ "/workforceID+eq+\"111HRA\"" ],
      "resourceType" : [ "/managed/user/" ],
      "password" : [ "Trivir@1234" ]
    }
  }, {
    "comment" : "Validate the password in eDir.",
    "operation" : "ValidateObject",
    "target" : "UMD",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "dn" : [ "(workforceID=111HRA),base=ou=Emp,ou=Gov,o=UT" ],
      "userPassword" : [ "Trivir@1234" ]
    }
  }, {
    "comment" : "TEST - Updates in UMD sync back",
    "operation" : "comment",
    "data" : { }
  }, {
    "comment" : "Set some attributes in UMD that sync back to OpenIDM.",
    "operation" : "ReplaceAttr",
    "target" : "UMD",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "dn" : [ "(workforceID=111HRA),base=ou=Emp,ou=Gov,o=UT" ],
      "UTIW-alias" : [ "new_user_000111hra" ],
      "mail" : [ ".*@noemail.utah.gov" ],
      "facsimileTelephoneNumber" : [ "111-111-1111" ],
      "homePhone" : [ "222-222-2222" ],
      "telephoneNumber" : [ "333-333-3333" ],
      "UTIW-PublicPhoneNumber" : [ "444-444-4444" ],
      "mobile" : [ "555-555-5555" ]
    }
  }, {
    "comment" : "Validate UMD.",
    "operation" : "ValidateObject",
    "target" : "UMD",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "dn" : [ "(UTIW-Alias=new_user_000111hra),base=ou=Emp,ou=Gov,o=UT" ],
      "UTIW-alias" : [ "new_user_000111hra" ],
      "mail" : [ ".*@noemail.utah.gov" ],
      "facsimileTelephoneNumber" : [ "111-111-1111" ],
      "homePhone" : [ "222-222-2222" ],
      "telephoneNumber" : [ "333-333-3333" ],
      "UTIW-PublicPhoneNumber" : [ "444-444-4444" ],
      "mobile" : [ "555-555-5555" ]
    }
  }, {
    "comment" : "Validate the updated UMD attrs are in OpenIDM.",
    "operation" : "ValidateObject",
    "target" : "OIDM",
    "waitInterval" : 3000,
    "retryCount" : 10,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "queryFilter" : [ "/workforceID+eq+\"111HRA\"" ],
      "resourceType" : [ "/managed/user/" ],
      "userName" : [ "new_user_000111hra" ],
      "mail" : [ ".*@noemail.utah.gov" ],
      "facsimileTelephoneNumber::string" : [ "111-111-1111" ],
      "homeTelephoneNumber" : [ "222-222-2222" ],
      "telephoneNumber::string" : [ "333-333-3333" ],
      "publishedTelephoneNumber" : [ "444-444-4444" ],
      "mobile" : [ "555-555-5555" ]
    }
  }, {
    "comment" : "Validate the email is sent.",
    "operation" : "comment",
    "data" : { }
  }, {
    "comment" : "Validate the user in the HRIS database.",
    "operation" : "Validate",
    "target" : "HRIS",
    "waitInterval" : 3000,
    "retryCount" : 20,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "sql" : [ "SELECT * FROM umd_empl_master WHERE employee_id='111HRA';" ],
      "empl_email" : [ ".*@noemail.utah.gov" ],
      "empl_work_phone" : [ "333-333-3333" ]
    }
  }, {
    "comment" : "comment",
    "operation" : "comment",
    "data" : { }
  }, {
    "comment" : "comment",
    "operation" : "comment",
    "data" : { }
  }, {
    "comment" : "comment",
    "operation" : "comment",
    "data" : { }
  }, {
    "comment" : "comment",
    "operation" : "comment",
    "data" : { }
  }, {
    "comment" : "Clean up",
    "operation" : "comment",
    "data" : { }
  }, {
    "comment" : "Clean up the employee table.",
    "operation" : "execSQL",
    "target" : "HRIS",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "sql" : [ "DELETE FROM umd_empl_master WHERE employee_id = '111HRA'" ]
    }
  }, {
    "comment" : "Clean up the event log",
    "operation" : "execSQL",
    "target" : "HRIS",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "sql" : [ "DELETE FROM eventlog WHERE table_key = 'employee_id=111HRA'" ]
    }
  }, {
    "comment" : "Cleanup",
    "operation" : "DeleteObject",
    "target" : "UMD",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "dn" : [ "(workforceID=111HRA),base=ou=Emp,ou=Gov,o=UT" ]
    }
  }, {
    "comment" : "Cleanup",
    "operation" : "DeleteObject",
    "target" : "UMD",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "dn" : [ "(UTIW-Alias=new_user_000111hra),base=ou=Emp,ou=Gov,o=UT" ]
    }
  }, {
    "comment" : "Cleanup",
    "operation" : "DeleteObject",
    "target" : "UMD",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "dn" : [ "(UTIW-Alias=new_user_000111hra),base=ou=Protect,ou=Gov,o=UT" ]
    }
  }, {
    "comment" : "Clear UMD-Admin Email info rows:",
    "operation" : "RemoveAttr",
    "target" : "UMD",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "dn" : [ "cn=UMD-Admin,ou=Trees,o=IS" ],
      "objectClass" : [ " " ],
      "UTIW-EmailInfo" : [ "HR:H:81:dn=\\\\TRIVIRSOU\\\\UT\\\\Gov\\\\Emp\\\\000111HRA:eventdelete" ]
    }
  }, {
    "comment" : "Clear UMD-Admin Email info rows:",
    "operation" : "RemoveAttr",
    "target" : "UMD",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "dn" : [ "cn=UMD-Admin,ou=Trees,o=IS" ],
      "UTIW-EmailInfo" : [ "HR:H:81:dn=\\\\TRIVIRSOU\\\\UT\\\\Gov\\\\Emp\\\\IdMUnitUserAddHire:eventdelete" ]
    }
  }, {
    "comment" : "Clean up the user.",
    "operation" : "Delete",
    "target" : "OIDM",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "queryFilter" : [ "/workforceID+eq+\"111HRA\"" ],
      "resourceType" : [ "/managed/user/" ]
    }
  }, {
    "comment" : "Clean up the user.",
    "operation" : "Delete",
    "target" : "OIDM",
    "waitInterval" : 0,
    "retryCount" : 0,
    "disabled" : false,
    "expectFailure" : false,
    "data" : {
      "queryFilter" : [ "/workforceID+eq+\"111HRA\"" ],
      "resourceType" : [ "/managed/user/" ]
    }
  } ]
}